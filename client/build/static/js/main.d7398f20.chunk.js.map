{"version":3,"sources":["components/layout/loading.gif","context/contadores/contadoresContext.js","components/layout/DateBox.js","components/layout/Navbar.js","context/zonas/zonasContext.js","utils/isPast.js","components/batches/GhostCounter.js","components/zonas/SubSectorCard.js","components/custom-buttons/NoBorderBtn.js","components/zonas/SubSectorModal.js","components/batches/GhostTotal.js","components/layout/Spinner.js","components/zonas/SectorCard.js","components/zonas/Zona.js","components/layout/GhostLoading.js","components/zonas/ZonasList.js","components/pages/Home.js","components/pages/Dev.js","utils/renameKeys.js","context/zonas/zonasReducer.js","context/types.js","context/zonas/ZonasState.js","utils/sameDay.js","context/contadores/contadoresReducer.js","context/contadores/ContadoresState.js","App.js","index.js"],"names":["module","exports","contadoresContext","createContext","registerLocale","es","DateBox","useContext","ContadoresContext","filtrarContadores","thisFecha","setFecha","ref","React","createRef","CustomInput","forwardRef","onClick","value","onChange","className","dB","Date","setDate","getDate","selected","date","customInput","todayButton","dateFormat","showPopperArrow","popperPlacement","locale","placeholderText","shouldCloseOnSelect","calendarClassName","wrapperClassName","popperClassName","dF","Navbar","useState","isExpanded","toggleExpansion","to","id","name","h_ref","map","content","key","zonasContext","isPast","dOne","d1","d2","getFullYear","getMonth","GhostCounter","sb","counter","setCounter","contador","setContador","addContador","setThisContador","addContadorSector","useEffect","_id","contadorActualizado","subsector","fecha","dbStatus","sector","disabled","SubSectorCard","nombre","nVias","NoBorderBtn","titulo","funcion","type","style","transition","SubSectorModal","setShowModal","subsectores","GhostTotal","Spinner","SectorCard","showModal","contadorSectorDay","loading","cont","filter","cS","length","Zona","zona","comuna","region","GhostLoading","src","alt","width","margin","display","ZonasList","ZonasContext","zonas","getZonas","getContadores","getContadorSector","clearFilter","contadores","contadorSector","Home","Dev","renameKeys","keysMap","obj","Object","keys","reduce","acc","state","action","payload","error","ZonasState","props","useReducer","zonasReducer","current","filtered","dispatch","loadingZonas","a","axios","get","res","data","entries","groupBy","0","1","response","Provider","children","sameDay","dTwo","sectorId","deltaContador","contadoresDay","ContadoresState","initialState","contadoresReducer","loadingContadores","z","sectores","sectoresId","i","s","push","Promise","all","p","flat","contadorId","config","headers","post","msg","put","subsectorId","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d7398f20.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.23968a8d.gif\";","import { createContext } from 'react';\n\nconst contadoresContext = createContext();\n\nexport default contadoresContext;\n","import React, { Fragment, forwardRef, useContext } from 'react';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport es from 'date-fns/locale/es';\nimport ContadoresContext from '../../context/contadores/contadoresContext';\nregisterLocale('es', es);\n\nconst DateBox = () => {\n  const contadoresContext = useContext(ContadoresContext);\n  const { filtrarContadores, thisFecha, setFecha } = contadoresContext;\n\n  const dayForward = () => {\n    const dF = new Date(thisFecha.setDate(thisFecha.getDate() + 1));\n    setFecha(dF);\n    filtrarContadores(dF);\n  };\n\n  const dayBackwards = () => {\n    const dB = new Date(thisFecha.setDate(thisFecha.getDate() - 1));\n    setFecha(dB);\n    filtrarContadores(dB);\n  };\n\n  const ref = React.createRef();\n  const CustomInput = forwardRef(({ onClick, value }, ref) => (\n    <button\n      onClick={onClick}\n      value={value}\n      onChange={onClick}\n      ref={ref}\n      className='bg-gray-300  w-40 py-3 pl-1 text-xl tracking-wide  text-gray-700 outline-none focus:outline-none'\n    >\n      {' '}\n      {value}\n    </button>\n  ));\n\n  return (\n    <Fragment>\n      <div className='flex items-stretch'>\n        <button\n          className='border-box bg-gray-400 active:bg-gray-500 p-3 rounded-l focus:outline-none'\n          onClick={dayBackwards}\n        >\n          <i className='fas fa-chevron-left'></i>\n        </button>\n\n        <DatePicker\n          selected={thisFecha}\n          onChange={(date) => {\n            setFecha(date);\n            filtrarContadores(date);\n          }}\n          customInput={<CustomInput ref={ref} />}\n          todayButton='Hoy'\n          dateFormat='dd/MM/yyyy'\n          showPopperArrow={false}\n          popperPlacement='bottom'\n          locale='es'\n          placeholderText='Weeks start on Monday'\n          shouldCloseOnSelect={false}\n          // className='bg-gray-300  w-40 py-3 pl-6 text-xl tracking-wide  text-gray-700 outline-none'\n          calendarClassName='font-sans border-none  text-lg tracking-wide opacity-100  '\n          wrapperClassName=''\n          popperClassName='border-none'\n        />\n\n        <button\n          className='bg-gray-400 active:bg-gray-500 p-3 rounded-r focus:outline-none'\n          onClick={dayForward}\n        >\n          <i className='fas fa-chevron-right'></i>\n        </button>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default DateBox;\n","import React, { useState } from 'react';\nimport DateBox from './DateBox';\nimport { Link } from 'react-router-dom';\n\nconst Navbar = () => {\n  const NavContent = [\n    { name: 'Inicio', h_ref: '/', id: '1' },\n    { name: 'Iniciar Sesión', h_ref: '#!', id: '3' },\n  ];\n  const [isExpanded, toggleExpansion] = useState(false);\n\n  return (\n    <nav className='flex bg-gray-100 p-3 flex-wrap border-b border-b-2 border-gray-200'>\n      <Link to='/' className='p-2 mr-4 inline-flex items-center border-r-2'>\n        <i className='fas fa-ghost fa-2x mx-2'></i>\n        <span className='text-xl text-gray font-bold uppercase tracking-wide'>\n          Ghost Climbers\n        </span>\n      </Link>\n      <DateBox />\n      <div className='md:hidden inline-flex flex-row ml-auto '>\n        <button\n          className='text-gray p-3 hover:bg-gray-300 rounded hover:text-gray outline-none'\n          onClick={() => toggleExpansion(!isExpanded)}\n        >\n          <i className='fas fa-bars'></i>\n        </button>\n      </div>\n      <div\n        className={`${\n          isExpanded ? `block` : `hidden`\n        }  top-navbar w-full md:inline-flex  md:flex-grow md:w-auto pt-2`}\n        id='navigation'\n      >\n        <div className='md:inline-flex md:flex-row md:ml-auto md:w-auto w-full md:items-center items-start  flex flex-col md:h-auto'>\n          {NavContent.map((content) => (\n            <Link\n              key={content.id}\n              to={content.h_ref}\n              className='md:inline-flex md:w-auto w-full px-3 py-2 rounded text-gray items-center justify-center hover:bg-gray-300 hover:text-gray'\n            >\n              <span>{content.name}</span>\n            </Link>\n          ))}\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n","import { createContext } from 'react';\n\nconst zonasContext = createContext();\n\nexport default zonasContext;\n","const isPast = (dOne) => {\n  const d1 = new Date(dOne);\n  const d2 = new Date(); // Today\n\n  return (\n    d1.getFullYear() < d2.getFullYear() ||\n    d1.getMonth() < d2.getMonth() ||\n    d1.getDate() < d2.getDate()\n  );\n};\n\nexport default isPast;\n","import React, { useState, useEffect, useContext } from 'react';\nimport ContadoresContext from '../../context/contadores/contadoresContext';\nimport isPast from '../../utils/isPast';\n\nconst GhostCounter = ({ sb }) => {\n  const [counter, setCounter] = useState(0);\n  // Contador Global\n  const [contador, setContador] = useState(0);\n  // Contadores states\n  const contadoresContext = useContext(ContadoresContext);\n  const {\n    addContador,\n    setThisContador,\n    thisFecha,\n    addContadorSector,\n  } = contadoresContext;\n\n  useEffect(() => {\n    if (sb) {\n      setContador(setThisContador(sb._id));\n      // eslint-disable-next-line\n    }\n  }, [sb, setThisContador]);\n\n  // add 1 to the couter\n  const countOne = () => {\n    if (counter <= 2) {\n      let count = counter + 1;\n      setCounter(count);\n      const contadorActualizado = {\n        subsector: {\n          _id: sb._id,\n        },\n        contador: 1,\n        fecha: thisFecha,\n      };\n      if (contador.dbStatus) {\n        addContadorSector(sb.sector, contadorActualizado.fecha);\n      }\n      addContador(contadorActualizado, contador._id, sb.sector);\n    }\n  };\n\n  const resetCount = () => {\n    setCounter(0);\n    const contadorActualizado = {\n      subsector: {\n        _id: sb._id,\n      },\n      contador: -counter,\n      fecha: thisFecha,\n    };\n\n    addContador(contadorActualizado, contador._id, sb.sector);\n  };\n\n  return (\n    <div id='' className='relative flex pr-3 items-center justify-center'>\n      <button\n        className={` inline-block flex justify-center items-center rounded w-12 px-3 focus:outline-none ' \n          ${\n            isPast(thisFecha)\n              ? 'bg-gray-800 text-white'\n              : contador.contador === 0 && counter === 0\n              ? 'bg-blue-200 text-gray-500'\n              : 'bg-blue-500 text-white'\n          } \n            `}\n        onClick={countOne}\n        disabled={isPast(thisFecha)}\n      >\n        {contador && <h5 className=''>{contador.contador}</h5>}\n        <i className='fas fa-ghost ml-1'></i>\n      </button>\n      {counter > 0 ? (\n        <button\n          className='relative inset-y-0 inline-block bg-transparent focus:outline-none flex justify-center items-center text-sm  text-gray-500'\n          onClick={resetCount}\n        >\n          <i className='fas fa-undo ml-3 '></i>\n        </button>\n      ) : (\n        ''\n      )}\n    </div>\n  );\n};\n\n//\n\nexport default GhostCounter;\n","import React from 'react';\nimport GhostCounter from '../batches/GhostCounter';\n\nconst SubSectorCard = ({ sb }) => {\n  return (\n    <div>\n      <div\n        key={sb._id}\n        className='box-border flex items-center justify-center w-full h-full border-b hover:bg-gray-200'\n      >\n        <div className='w-full px-2 py-3'>\n          <p className=' text-lg mb-1 text-black '>{sb.nombre}</p>\n          <p className=' text-xs mb-1 text-gray-700 '>\n            {`Número de vías: ${sb.nVias}`}\n          </p>\n        </div>\n        <div className='w-full'>\n          <GhostCounter sb={sb} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SubSectorCard;\n","import React from 'react';\n\nconst NoBorderBtn = ({ titulo, funcion }) => {\n  return (\n    <div>\n      <button\n        className='text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1'\n        type='button'\n        style={{ transition: 'all .15s ease' }}\n        onClick={() => funcion(false)}\n      >\n        {titulo}\n      </button>\n    </div>\n  );\n};\n\nexport default NoBorderBtn;\n","import React, { Fragment } from 'react';\nimport SubSectorCard from './SubSectorCard';\nimport NoBorderBtn from '../custom-buttons/NoBorderBtn';\n\nconst SubSectorModal = ({ setShowModal, subsectores, sector }) => {\n  return (\n    <Fragment>\n      <div className='justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none'>\n        <div className='relative w-screen  max-h-screen md:max-w-2xl my-4 mx-auto '>\n          {/*content*/}\n          <div className='rounded-t bg-gray-500 w-full h-full p-2 text-white flex items-center  justify-start '>\n            <h1 className='text-xl font-bold'>{sector}</h1>\n          </div>\n          <div className='border-0 flex flex-col w-full h-full bg-white outline-none focus:outline-none rounded-b'>\n            <div className='grid grid-cols-1 md:grid-cols-3  grid-flow-row-dense p-3 overflow-x-hidden'>\n              {subsectores &&\n                subsectores.map((sb) => <SubSectorCard key={sb._id} sb={sb} />)}\n            </div>\n            {/*footer*/}\n            <div className='flex items-center justify-end p-3 rounded-b'>\n              <NoBorderBtn\n                titulo={'Cerrar'}\n                funcion={() => setShowModal(false)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className='opacity-25 fixed inset-0 z-40 bg-black'></div>\n    </Fragment>\n  );\n};\n\nexport default SubSectorModal;\n","import React from 'react';\n\nconst GhostTotal = ({ contador }) => {\n  return (\n    <div id='' className=' flex items-center justify-center px-3'>\n      <div\n        className={` inline-block flex justify-center items-center rounded w-12 px-3 focus:outline-none ' \n       ${\n         contador === 0 ? 'bg-blue-200 text-gray-500' : 'bg-blue-500 text-white'\n       }\n         `}\n      >\n        <h5 className=''>{contador}</h5>\n        <i className='fas fa-ghost ml-1'></i>\n      </div>\n    </div>\n  );\n};\n\nexport default GhostTotal;\n","import React from 'react';\n\nconst Spinner = () => {\n  return (\n    <div className='lds-ripple items-center justify-center mb-4 mr-4'>\n      <div></div>\n      <div></div>\n    </div>\n  );\n};\n\nexport default Spinner;\n","import React, { useState, Fragment, useContext } from 'react';\nimport SubSectorModal from '../zonas/SubSectorModal';\nimport GhostTotal from '../batches/GhostTotal';\nimport ContadoresContext from '../../context/contadores/contadoresContext';\nimport Spinner from '../layout/Spinner';\n\nconst SectorCard = ({ sector }) => {\n  const { nombre, subsectores } = sector;\n  const [showModal, setShowModal] = useState(false);\n\n  // Contadores states\n  const contadoresContext = useContext(ContadoresContext);\n  const { contadorSectorDay, loading } = contadoresContext;\n\n  let contador;\n  if (contadorSectorDay) {\n    const cont = contadorSectorDay.filter((cS) => cS._id.sector === sector._id);\n    if (cont.length > 0) {\n      contador = cont[0].contador;\n    } else {\n      contador = 0;\n    }\n  }\n\n  return (\n    <Fragment>\n      <button\n        onClick={() => setShowModal(true)}\n        className='inline-block flex justify-between  items-stretch md:items-center rounded shadow-lg m-3 md:w-64 bg-gray-300 focus:outline-none'\n      >\n        <div className='inline-block p-3  text-2xl'>{nombre}</div>\n        <div className='flex mr-3'>\n          {loading ? <Spinner /> : <GhostTotal contador={contador} />}\n        </div>\n      </button>\n      {showModal ? (\n        <div className='flex'>\n          <SubSectorModal\n            setShowModal={() => setShowModal()}\n            subsectores={subsectores}\n            sector={nombre}\n          />\n        </div>\n      ) : null}\n    </Fragment>\n  );\n};\n\nexport default SectorCard;\n","import React from 'react';\nimport SectorCard from './SectorCard';\n\nconst Zona = ({ zona }) => {\n  const { comuna, sector } = zona;\n  return (\n    <div className='box-border bg-gray-500 opacity-50s rounded  m-3 w-full md:w-auto h-auto'>\n      <div className='p-1 mx-1'>\n        <h1 className='text-2xl text-gray-100 font-bold'>{comuna}</h1>\n        <h3 className='text-lg self-end mb-1 font-hairline'>\n          {sector && sector[0].region}\n        </h3>\n      </div>\n      <div className='flex flex-col w-auto'>\n        {sector &&\n          sector.map((sector) => (\n            <SectorCard key={sector.id} sector={sector} />\n          ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Zona;\n","import React from 'react';\nimport loading from './loading.gif';\nconst GhostLoading = () => {\n  return (\n    <div className='flex justify-center w-screen'>\n      <img\n        src={loading}\n        alt='Loading...'\n        style={{ width: '500px', margin: 'auto', display: 'block' }}\n      />\n    </div>\n  );\n};\n\nexport default GhostLoading;\n","import React, { useContext, useEffect } from 'react';\n// import { useAsync } from 'react-async-hook';\nimport ZonasContext from '../../context/zonas/zonasContext';\nimport Zona from './Zona';\nimport GhostLoading from '../layout/GhostLoading';\nimport ContadoresContext from '../../context/contadores/contadoresContext';\n\nconst ZonasList = () => {\n  const zonasContext = useContext(ZonasContext);\n  const { zonas, getZonas, loading } = zonasContext;\n\n  const contadoresContext = useContext(ContadoresContext);\n  const {\n    getContadores,\n    getContadorSector,\n    filtrarContadores,\n    clearFilter,\n    contadores,\n    contadorSector,\n    thisFecha,\n  } = contadoresContext;\n\n  // const loadingCont = contadoresContext.loading;\n\n  useEffect(() => {\n    getZonas();\n    getContadores();\n\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    clearFilter();\n    if (contadores && contadorSector) {\n      filtrarContadores(thisFecha);\n    }\n\n    // eslint-disable-next-line\n  }, [contadores, contadorSector, thisFecha]);\n\n  useEffect(() => {\n    getContadorSector(zonas);\n    // eslint-disable-next-line\n  }, [zonas]);\n\n  if (zonas !== null && zonas.length === 0 && !loading) {\n    return <h4> Error </h4>;\n  }\n\n  return (\n    <div className='flex flex-wrap items-baseline'>\n      {loading ? (\n        <GhostLoading />\n      ) : (\n        zonas && zonas.map((zona) => <Zona key={zona.comuna} zona={zona} />)\n      )}\n    </div>\n  );\n};\n\nexport default ZonasList;\n","import React, { Fragment } from 'react';\nimport Navbar from '../layout/Navbar';\nimport ZonasList from '../zonas/ZonasList';\n\nconst Home = () => {\n  return (\n    <Fragment>\n      <Navbar />\n      <div className='flex'>\n        <ZonasList />\n      </div>\n      <footer className='bg-gray-100 h-64 flex justify-center items-center '>\n        <p> Todos los derechos reservados {'\\u00A9'} </p>\n      </footer>\n    </Fragment>\n  );\n};\n\nexport default Home;\n","import React from 'react';\nimport DateBox from '../layout/DateBox';\n\nconst Dev = () => {\n  return (\n    <div className='h-screen w-screen flex justify-center items-center'>\n      <div className='mt-20'>\n        <DateBox />\n        <div className='w-32 h-screen'></div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dev;\n","const renameKeys = (keysMap, obj) =>\n  Object.keys(obj).reduce(\n    (acc, key) => ({\n      ...acc,\n      ...{ [keysMap[key] || key]: obj[key] },\n    }),\n    {}\n  );\n\nexport default renameKeys;\n","import { GET_ZONAS, ZONAS_ERROR, LOADING_ZONAS } from '../types';\n\nexport default (state, action) => {\n  switch (action.type) {\n    case GET_ZONAS:\n      return { ...state, loading: false, zonas: action.payload };\n    case LOADING_ZONAS:\n      return {\n        ...state,\n        loading: true,\n      };\n\n    case ZONAS_ERROR:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n","export const GET_ZONAS = 'GET_ZONAS';\nexport const ZONAS_ERROR = 'ZONAS_ERROR';\nexport const LOADING_ZONAS = 'LOADING_ZONAS';\n\nexport const GET_CONTADORES = 'GET_CONTADORES';\nexport const GET_CONTADORES_SECTOR = 'GET_CONTADORES_SECTOR';\nexport const ADD_CONTADORES = 'ADD_CONTADORES';\nexport const ADD_CONTADOR_SECTOR = 'ADD_CONTADOR_SECTOR';\nexport const LOADING_CONTADORES = 'LOADING_CONTADORES';\nexport const ERROR_CONTADORES = 'ERROR_CONTADORES';\nexport const UPDATE_CONTADORES = 'UPDATE_CONTADORES';\nexport const FILTRAR_CONTADORES = 'FILTRAR_CONTADORES';\nexport const CLEAR_FILTER = 'CLEAR_FILTER';\nexport const SET_FECHA = 'SET_FECHA';\n","import React, { useReducer } from 'react';\nimport axios from 'axios';\nimport groupBy from 'lodash/groupBy';\nimport renameKeys from '../../utils/renameKeys';\n\nimport ZonasContext from './zonasContext';\nimport zonasReducer from './zonasReducer';\n\nimport { GET_ZONAS, ZONAS_ERROR, LOADING_ZONAS } from '../types';\n\nconst ZonasState = (props) => {\n  const initialState = {\n    zonas: null,\n    loading: false,\n    current: null,\n    filtered: null,\n    error: null,\n  };\n\n  const [state, dispatch] = useReducer(zonasReducer, initialState);\n\n  // Loading\n  const loadingZonas = () => {\n    const loading = true;\n    dispatch({ type: LOADING_ZONAS, payload: loading });\n  };\n\n  // Get Zonas\n  const getZonas = async () => {\n    try {\n      loadingZonas();\n      const res = await axios.get('/api/v1/sectores');\n\n      let zonas = res.data.data;\n\n      zonas = Object.entries(groupBy(zonas, 'comuna')).map((zona) =>\n        renameKeys({ 0: 'comuna', 1: 'sector' }, zona)\n      );\n\n      dispatch({ type: GET_ZONAS, payload: zonas });\n    } catch (err) {\n      dispatch({ type: ZONAS_ERROR, payload: err.response });\n    }\n  };\n\n  // // Filter Contacts\n  // const filterContacts = (text) => {\n  //   dispatch({ type: FILTER_CONTACTS, payload: text });\n  // };\n\n  // // Clear Filter\n  // const clearFilter = () => {\n  //   dispatch({ type: CLEAR_FILTER });\n  // };\n\n  // // Clear Contacts\n\n  // const clearContacts = () => dispatch({ type: CLEAR_CONTACTS });\n\n  return (\n    <ZonasContext.Provider\n      value={{\n        zonas: state.zonas,\n        loading: state.loading,\n        current: state.current,\n        filtered: state.filtered,\n        error: state.error,\n        // filterContacts,\n        // clearFilter,\n        getZonas,\n        // clearContacts,\n        loadingZonas,\n      }}\n    >\n      {props.children}\n    </ZonasContext.Provider>\n  );\n};\n\nexport default ZonasState;\n","const sameDay = (dOne, dTwo) => {\n  const d1 = new Date(dOne);\n  const d2 = new Date(dTwo);\n\n  return (\n    d1.getFullYear() === d2.getFullYear() &&\n    d1.getMonth() === d2.getMonth() &&\n    d1.getDate() === d2.getDate()\n  );\n};\n\nexport default sameDay;\n","import {\n  GET_CONTADORES,\n  ADD_CONTADORES,\n  LOADING_CONTADORES,\n  ERROR_CONTADORES,\n  GET_CONTADORES_SECTOR,\n  UPDATE_CONTADORES,\n  FILTRAR_CONTADORES,\n  CLEAR_FILTER,\n  SET_FECHA,\n  ADD_CONTADOR_SECTOR,\n} from '../types';\n\nimport sameDay from '../../utils/sameDay';\n\nexport default (state, action) => {\n  switch (action.type) {\n    case LOADING_CONTADORES:\n      return {\n        ...state,\n        loading: true,\n      };\n    case SET_FECHA:\n      return {\n        ...state,\n        thisFecha: action.payload,\n      };\n    case GET_CONTADORES:\n      return {\n        ...state,\n        contadores: action.payload,\n        loading: false,\n      };\n    case GET_CONTADORES_SECTOR:\n      return {\n        ...state,\n        contadorSector: action.payload,\n        loading: false,\n      };\n\n    case UPDATE_CONTADORES:\n      return {\n        ...state,\n        contadores: state.contadores.map((contador) =>\n          contador._id === action.payload._id ? action.payload : contador\n        ),\n        contadorSector: state.contadorSector.map((cS) =>\n          cS._id.sector === action.payload.sectorId &&\n          sameDay(cS.fecha, action.payload.fecha)\n            ? { ...cS, contador: cS.contador + action.payload.deltaContador }\n            : cS\n        ),\n        loading: false,\n      };\n    case ADD_CONTADORES:\n      return {\n        ...state,\n        contadores: [...state.contadores, action.payload],\n        contadorSector: state.contadorSector.map((cS) =>\n          cS._id.sector === action.payload.sectorId &&\n          sameDay(cS.fecha, action.payload.fecha)\n            ? { ...cS, contador: cS.contador + action.payload.deltaContador }\n            : cS\n        ),\n      };\n    case ADD_CONTADOR_SECTOR:\n      return {\n        ...state,\n        contadorSector: [...state.contadorSector, action.payload],\n      };\n    case FILTRAR_CONTADORES:\n      return {\n        ...state,\n        contadoresDay: state.contadores.filter((cont) =>\n          sameDay(cont.fecha, action.payload)\n        ),\n        contadorSectorDay: state.contadorSector.filter((cont) =>\n          sameDay(cont.fecha, action.payload)\n        ),\n        loading: false,\n      };\n    case CLEAR_FILTER:\n      return {\n        ...state,\n        contadoresDay: null,\n        contadorSectorDay: null,\n      };\n    case ERROR_CONTADORES:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n","import React, { useReducer } from 'react';\nimport axios from 'axios';\n\nimport ContadoresContext from './contadoresContext';\nimport contadoresReducer from './contadoresReducer';\n\nimport {\n  GET_CONTADORES,\n  ADD_CONTADORES,\n  ADD_CONTADOR_SECTOR,\n  LOADING_CONTADORES,\n  ERROR_CONTADORES,\n  GET_CONTADORES_SECTOR,\n  UPDATE_CONTADORES,\n  FILTRAR_CONTADORES,\n  CLEAR_FILTER,\n  SET_FECHA,\n} from '../types';\nimport sameDay from '../../utils/sameDay';\n\nconst ContadoresState = (props) => {\n  const initialState = {\n    contadores: null,\n    contadoresDay: null,\n    contadorSector: null,\n    contadorSectorDay: null,\n    thisFecha: new Date(),\n    loading: false,\n    error: null,\n  };\n\n  const [state, dispatch] = useReducer(contadoresReducer, initialState);\n\n  // Loading\n  const loadingContadores = () => {\n    const loading = true;\n    dispatch({ type: LOADING_CONTADORES, payload: loading });\n  };\n\n  // Obtener contadores por subsector\n  const getContadores = async () => {\n    try {\n      loadingContadores();\n\n      const res = await axios.get(`/api/v1/contadores`);\n\n      let contadores = res.data.data;\n\n      dispatch({ type: GET_CONTADORES, payload: contadores });\n    } catch (err) {\n      dispatch({ type: ERROR_CONTADORES, payload: err.response });\n    }\n  };\n\n  // Obtener contadores por sector\n  const getContadorSector = async (zonas) => {\n    try {\n      loadingContadores();\n\n      const sectores = await zonas.map((z) => z.sector);\n      const sectoresId = [];\n\n      for (let i = 0; i < sectores.length; i++) {\n        sectores[i].map((s) => sectoresId.push(s._id));\n      }\n\n      const res = await Promise.all(\n        sectoresId.map((id) => axios.get(`/api/v1/sectores/${id}/contadores`))\n      );\n\n      const contadorSector = res.map((p) => p.data.data).flat(2);\n\n      dispatch({ type: GET_CONTADORES_SECTOR, payload: contadorSector });\n    } catch (err) {\n      dispatch({ type: ERROR_CONTADORES, payload: err.response });\n    }\n  };\n\n  // Add contador\n  const addContador = async (contador, contadorId, sectorId) => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    };\n    if (!contadorId) {\n      try {\n        const res = await axios.post(\n          `/api/v1/subsectores/${contador.subsector._id}/contadores/`,\n          contador,\n          config\n        );\n\n        res.data.data.sectorId = sectorId;\n        res.data.data.deltaContador = contador.contador;\n        dispatch({ type: ADD_CONTADORES, payload: res.data.data });\n      } catch (err) {\n        dispatch({ type: ERROR_CONTADORES, payload: err.response.msg });\n      }\n    } else {\n      try {\n        const res = await axios.put(\n          `/api/v1/contadores/${contadorId}`,\n          contador,\n          config\n        );\n        res.data.data.sectorId = sectorId;\n        res.data.data.deltaContador = contador.contador;\n        dispatch({ type: UPDATE_CONTADORES, payload: res.data.data });\n      } catch (err) {\n        dispatch({ type: ERROR_CONTADORES, payload: err.response.msg });\n      }\n    }\n  };\n\n  const addContadorSector = (sectorId, fecha) => {\n    const contadorExist = state.contadorSector.filter(\n      (cS) => cS._id === sectorId && sameDay(cS.fecha, state.thisFecha)\n    );\n\n    if (contadorExist.length === 0) {\n      const contadorSector = {\n        _id: { sector: sectorId },\n        fecha,\n        contador: 0,\n      };\n      dispatch({ type: ADD_CONTADOR_SECTOR, payload: contadorSector });\n    }\n  };\n\n  // Filtrar contador para subsector\n  const setThisContador = (subsectorId) => {\n    if (state.contadoresDay) {\n      let contador = state.contadoresDay.filter(\n        (cont) =>\n          cont.subsector._id === subsectorId || cont.subsector === subsectorId\n      );\n\n      if (contador.length === 0) {\n        contador = [\n          {\n            subsector: {\n              _id: subsectorId,\n            },\n            fecha: state.thisFecha,\n            contador: 0,\n            dbStatus: 401,\n          },\n        ];\n      }\n\n      return contador[0];\n    }\n  };\n\n  // Fijar fecha\n  const setFecha = (fecha) => {\n    dispatch({ type: SET_FECHA, payload: fecha });\n  };\n\n  // Filtrar contadores por día seleccionado\n  const filtrarContadores = (fecha) => {\n    loadingContadores();\n    dispatch({ type: FILTRAR_CONTADORES, payload: fecha });\n  };\n\n  const clearFilter = () => {\n    dispatch({ type: CLEAR_FILTER });\n  };\n  return (\n    <ContadoresContext.Provider\n      value={{\n        contadores: state.contadores,\n        contadoresDay: state.contadoresDay,\n        contadorSector: state.contadorSector,\n        contadorSectorDay: state.contadorSectorDay,\n        thisFecha: state.thisFecha,\n        loading: state.loading,\n        error: state.error,\n        getContadores,\n        loadingContadores,\n        getContadorSector,\n        addContadorSector,\n        addContador,\n        setThisContador,\n        filtrarContadores,\n        setFecha,\n        clearFilter,\n      }}\n    >\n      {props.children}\n    </ContadoresContext.Provider>\n  );\n};\n\nexport default ContadoresState;\n","import React, { Fragment } from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport Home from './components/pages/Home';\nimport Dev from './components/pages/Dev';\nimport ZonasState from './context/zonas/ZonasState';\nimport ContadoresState from './context/contadores/ContadoresState';\n\nfunction App() {\n  return (\n    <div className='App h-screen'>\n      <ZonasState>\n        <ContadoresState>\n          <Router>\n            <Fragment>\n              <Route exact path='/' component={Home} />\n              <Route exact path='/dev' component={Dev} />\n            </Fragment>\n          </Router>\n        </ContadoresState>\n      </ZonasState>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './assets/main.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}