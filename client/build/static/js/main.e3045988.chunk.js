(this.webpackJsonpghost_climber=this.webpackJsonpghost_climber||[]).push([[0],{120:function(e,t,a){e.exports=a.p+"static/media/loading.23968a8d.gif"},124:function(e,t,a){e.exports=a(300)},129:function(e,t,a){},300:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(41),o=a.n(c),s=(a(129),a(44)),l=a(8),i=a(5),u=a(79),m=a.n(u),d=a(122),f=Object(n.createContext)();Object(u.registerLocale)("es",d.a);var p=function(){var e=Object(n.useContext)(f),t=e.thisFecha,a=e.setFecha;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"flex items-stretch"},r.a.createElement("button",{className:"border-box bg-gray-400 active:bg-gray-500 p-3 rounded-l focus:outline-none",onClick:function(){var e=new Date(t.setDate(t.getDate()-1));a(e)}},r.a.createElement("i",{className:"fas fa-chevron-left"})),r.a.createElement(m.a,{selected:t,onChange:function(e){a(e)},todayButton:"Hoy",dateFormat:"dd/MM/yyyy",showPopperArrow:!1,popperPlacement:"bottom",locale:"es",placeholderText:"Weeks start on Monday",shouldCloseOnSelect:!1,className:"bg-gray-300  w-40 py-3 pl-6 text-xl tracking-wide  text-gray-700 outline-none",calendarClassName:"font-sans border-none  text-lg tracking-wide opacity-100  ",wrapperClassName:"",popperClassName:"border-none"}),r.a.createElement("button",{className:"bg-gray-400 active:bg-gray-500 p-3 rounded-r focus:outline-none",onClick:function(){var e=new Date(t.setDate(t.getDate()+1));a(e)}},r.a.createElement("i",{className:"fas fa-chevron-right"}))))},b=Object(n.createContext)(),E=function(e){var t=e.isDateBox,a=void 0===t||t,c=e.setAcerca,o=e.acerca,l=Object(n.useContext)(b).logout,u=Object(n.useState)(!1),m=Object(i.a)(u,2),d=m[0],f=m[1];return r.a.createElement("nav",{className:"flex bg-gray-100 p-3 flex-wrap border-b border-b-2 border-gray-200"},r.a.createElement(s.b,{to:"/",className:"p-2 mr-4 inline-flex items-center border-r-2"},r.a.createElement("i",{className:"fas fa-ghost fa-2x mx-2"}),r.a.createElement("span",{className:"text-xl text-gray font-bold uppercase tracking-wide"},"Ghost Climbers")),a&&r.a.createElement(p,null),r.a.createElement("div",{className:"md:hidden inline-flex flex-row ml-auto "},r.a.createElement("button",{className:"text-gray p-3 hover:bg-gray-300 rounded hover:text-gray outline-none",onClick:function(){return f(!d)}},r.a.createElement("i",{className:"fas fa-bars"}))),r.a.createElement("div",{className:"".concat(d?"block":"hidden","  top-navbar w-full md:inline-flex  md:flex-grow md:w-auto pt-2"),id:"navigation"},r.a.createElement("div",{className:"md:inline-flex md:flex-row md:ml-auto md:w-auto w-full md:items-center items-start  flex flex-col md:h-auto"},r.a.createElement("button",{className:"md:inline-flex md:w-auto w-full px-3 py-2 rounded text-gray items-center justify-center hover:bg-gray-300 hover:text-gray",onClick:function(){return c(!o)}},"Acerca"),r.a.createElement("button",{className:"md:inline-flex md:w-auto w-full px-3 py-2 rounded text-gray items-center justify-center hover:bg-gray-300 hover:text-gray",onClick:function(){l()}},"Cerrar Sesi\xf3n"))))},g=function(){return r.a.createElement("div",{className:"lds-ripple items-center justify-center mb-4 mr-4"},r.a.createElement("div",null),r.a.createElement("div",null))},y=a(20),x=a.n(y),v=r.a.memo((function(e){var t=e.sb,a=Object(n.useState)(0),c=Object(i.a)(a,2),o=c[0],s=c[1],l=Object(n.useState)(null),u=Object(i.a)(l,2),m=u[0],d=u[1],p=Object(n.useContext)(f),b=p.addContador,E=p.setThisContador,y=p.thisFecha;Object(n.useLayoutEffect)((function(){t&&d(E(t._id))}),[t,E]);return r.a.createElement("div",{id:"",className:"relative flex pr-3 items-center justify-center"},r.a.createElement("button",{className:" inline-block flex justify-center items-center rounded w-12 px-3 focus:outline-none ' \n          ".concat(m&&(x()(y).isBefore(x()(),"day")?"bg-gray-800 text-white":0===m.contador&&0===o?"bg-blue-200 text-gray-500":"bg-blue-500 text-white")," \n            "),onClick:function(){if(o<=2){s(o+1);var e={subsector:{_id:t._id},contador:1,fecha:y};b(e,m._id,t.sector)}},disabled:x()(y).isBefore(x()(),"day")},m?r.a.createElement("h5",{className:""},m.contador):r.a.createElement(g,null),r.a.createElement("i",{className:"fas fa-ghost ml-1"})),o>0?r.a.createElement("button",{className:"relative inset-y-0 inline-block bg-transparent focus:outline-none flex justify-center items-center text-sm  text-gray-500",onClick:function(){s(0);var e={subsector:{_id:t._id},contador:-o,fecha:y};b(e,m._id,t.sector)}},r.a.createElement("i",{className:"fas fa-undo ml-3 "})):"")})),h=r.a.memo((function(e){var t=e.sb;return r.a.createElement("div",null,r.a.createElement("div",{key:t._id,className:"box-border flex items-center justify-center w-full h-full border-b hover:bg-gray-200"},r.a.createElement("div",{className:"w-full px-2 py-3"},r.a.createElement("p",{className:" text-lg mb-1 text-black "},t.nombre),r.a.createElement("p",{className:" text-xs mb-1 text-gray-700 "},"N\xfamero de v\xedas: ".concat(t.nVias))),r.a.createElement("div",{className:"w-full"},r.a.createElement(v,{sb:t}))))})),O=function(e){var t=e.titulo,a=e.funcion,c=Object(n.useContext)(f),o=c.getContadorSector,s=c.zonas;return r.a.createElement("div",null,r.a.createElement("button",{className:"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1",type:"button",style:{transition:"all .15s ease"},onClick:function(){a(!1),o(s)}},t))},N=r.a.memo((function(e){var t=e.setShowModal,a=e.subsectores,c=e.sector;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none"},r.a.createElement("div",{className:"relative w-screen  max-h-screen md:max-w-2xl my-4 mx-auto "},r.a.createElement("div",{className:"rounded-t bg-gray-500 w-full h-full p-2 text-white flex items-center  justify-start "},r.a.createElement("h1",{className:"text-xl font-bold"},c)),r.a.createElement("div",{className:"border-0 flex flex-col w-full h-full bg-white outline-none focus:outline-none rounded-b"},r.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3  grid-flow-row-dense p-3 overflow-x-hidden"},a&&a.map((function(e){return r.a.createElement(h,{key:e._id,sb:e})}))),r.a.createElement("div",{className:"flex items-center justify-end p-3 rounded-b"},r.a.createElement(O,{titulo:"Cerrar",funcion:function(){return t(!1)}}))))),r.a.createElement("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"}))})),j=function(e){var t=e.contador;return r.a.createElement("div",{id:"",className:" flex items-center justify-center px-3"},r.a.createElement("div",{className:" inline-block flex justify-center items-center rounded w-12 px-3 focus:outline-none ' \n       ".concat(0===t?"bg-blue-200 text-gray-500":"bg-blue-500 text-white","\n         ")},r.a.createElement("h5",{className:""},t),r.a.createElement("i",{className:"fas fa-ghost ml-1"})))},w=r.a.memo((function(e){var t=e.sector,a=t.nombre,c=t.subsectores,o=Object(n.useState)(!1),s=Object(i.a)(o,2),l=s[0],u=s[1],m=Object(n.useState)(null),d=Object(i.a)(m,2),p=d[0],b=d[1],E=Object(n.useContext)(f),y=E.contadorSector,x=E.setThisContadorSector;return Object(n.useLayoutEffect)((function(){b(x(t._id))}),[t,x]),r.a.createElement(n.Fragment,null,r.a.createElement("button",{onClick:function(){u(!0)},className:"inline-block flex justify-between  items-stretch md:items-center rounded shadow-lg m-3 md:w-64 bg-gray-300 focus:outline-none"},r.a.createElement("div",{className:"inline-block p-3  text-2xl"},a),r.a.createElement("div",{className:"flex mr-3"},y?r.a.createElement(j,{contador:p}):r.a.createElement(g,null))),l?r.a.createElement("div",{className:"flex"},r.a.createElement(N,{setShowModal:function(){return u()},subsectores:c,sector:a})):null)})),C=r.a.memo((function(e){var t=e.zona,a=t.comuna,n=t.sector;return r.a.createElement("div",{className:"box-border bg-gray-500 opacity-50s rounded  m-3 w-full md:w-auto h-auto"},r.a.createElement("div",{className:"p-1 mx-1"},r.a.createElement("h1",{className:"text-2xl text-gray-100 font-bold"},a),r.a.createElement("h3",{className:"text-lg self-end mb-1 font-hairline"},n&&n[0].region)),r.a.createElement("div",{className:"flex flex-col w-auto"},n&&n.map((function(e){return r.a.createElement(w,{key:e.id,sector:e})}))))})),S=a(120),k=a.n(S),R=function(){return r.a.createElement("div",{className:"flex justify-center w-screen"},r.a.createElement("img",{src:k.a,alt:"Loading...",style:{width:"500px",margin:"auto",display:"block"}}))},A=r.a.memo((function(){var e=Object(n.useContext)(f),t=e.zonas,a=e.getZonas,c=e.loadingZonas,o=e.getContadores,s=e.getContadorSector,l=e.filtrarContadores,i=e.contadores,u=e.contadorSector,m=e.thisFecha;return Object(n.useEffect)((function(){a(),o()}),[]),Object(n.useEffect)((function(){s(t)}),[t]),Object(n.useEffect)((function(){i&&u&&l(m)}),[i,u,m]),null===t||0!==t.length||c?r.a.createElement("div",{className:"flex flex-wrap items-baseline"},c?r.a.createElement(R,null):t&&t.map((function(e){return r.a.createElement(C,{key:e.comuna,zona:e})}))):r.a.createElement("h4",null," Error ")})),_=function(e){var t=e.isLeerMas,a=void 0===t||t,c=Object(n.useState)(!0),o=Object(i.a)(c,2),s=o[0],l=o[1];return r.a.createElement("div",{className:"flex flex-col justify-between h-full"},s&&a?r.a.createElement("div",{className:"flex h-full flex-col justify-center items-center"},r.a.createElement("h3",{className:"text-3xl  tracking-wide font-bold "}," ","Unidos para estar divididos"),r.a.createElement("button",{className:"text-sm bg-transparent rounded bg-black hover:bg-gray-600 active:bg-blue-500 text-white px-3 py-2  focus:outline-none focus:font-bold mb-3 mt-10",onClick:function(){return l(!s)}},r.a.createElement("i",{className:"fas fa-info"})," Leer m\xe1s")):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"flex flex-col m-2 mt-10 lg:px-10 "},r.a.createElement("p",{className:"mb-5"},"Sabemos que nadie esta escalando en roca, pero para todos esos escaladores invisibles Ghost Climber los puede ayudar."),r.a.createElement("p",{className:"mb-5 "},"Ingresa y registra tu visita para poder dividrnos mejor en los sectores de escalada."," "),r.a.createElement("p",{className:"mb-5 "},r.a.createElement("span",null,r.a.createElement("span",{className:" text-gray font-bold uppercase tracking-wide"},"Ghost Climber"))," ","busca ayudar a los escaladores que viven en los alrededores de Santiago a distriubirse en los distintos sectores y evitar las aglomeraciones que estaban sucediendo.")),a&&r.a.createElement("button",{className:"block md:inline-block w-3/4 text-sm  self-center opacity-75 bg-transparent rounded bg-black hover:bg-gray-600 active:bg-blue-500 text-white px-3 py-2  focus:outline-none focus:font-bold mb-3",onClick:function(){return l(!s)}},"Volver"),r.a.createElement("div",{className:"flex justify-center items-center text-sm"},r.a.createElement("div",{className:"w-full border-2 border-red-500 bg-red-100 rounded"},r.a.createElement("h3",{className:"text-left ml-3 my-3 text-red-600"},r.a.createElement("i",{className:"fas fa-skull-crossbones"})," \xa1Importante!"),r.a.createElement("p",{className:"m-2 text-left "},"Esta p\xe1gina te pide que respetes todas las medidas oficiales como el uso de mascarillas, el respeto a las cuarentenas, y sobre todo"," ",r.a.createElement("span",{className:"font-bold text-red-500"},"evita accidentes mientras los centros de salud est\xe1n saturados."))))),r.a.createElement("div",{className:"text-sm text-gray-700 mt-10"},"Este es una versi\xf3n ",r.a.createElement("span",{className:"font-bold"},"beta")," de un proyecto c\xf3digo abierto, aporta en"," ",r.a.createElement("a",{href:"https://github.com/elevyg/ghost_climber",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fab fa-2x fa-github-square hover:text-blue-500"}))))},T=_,D=function(){return r.a.createElement("div",{className:"mx-40"},r.a.createElement(T,{isLeerMas:!1}))},L=r.a.memo((function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(b).loadUser;return Object(n.useEffect)((function(){o()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement(E,{isDateBox:!0,setAcerca:function(){return c(!a)},acerca:a}),r.a.createElement("div",{className:"flex"},a?r.a.createElement(D,null):r.a.createElement(A,null)),r.a.createElement("footer",{className:"bg-gray-100 h-64 flex justify-center items-center "},r.a.createElement("p",null," Todos los derechos reservados ","\xa9"," ")))})),F=a(27),I=a(4),G=Object(n.createContext)(),U=function(){var e=Object(n.useContext)(G),t=Object(n.useContext)(b),a=e.setAlert,c=t.register,o=t.error,s=t.clearErrors;Object(n.useEffect)((function(){"User already exists"===o&&(a(o,"danger"),s())}),[o]);var l=Object(n.useState)({userName:"",password:"",password2:""}),u=Object(i.a)(l,2),m=u[0],d=u[1],f=m.userName,p=m.password,E=m.password2,g=function(e){return d(Object(I.a)(Object(I.a)({},m),{},Object(F.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"text-3xl"},"Reg\xedstrate"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""===f||""===p?a("Por favor complete todos los campos","danger"):p!==E?a("Las contrase\xf1as no coinciden","danger"):c({userName:f,password:p})}},r.a.createElement("label",{htmlFor:"userName",className:"block"},r.a.createElement("span",{className:"text-gray-700"},"Usuario"),r.a.createElement("input",{className:"form-input mt-1 block w-full",type:"text",name:"userName",value:f,onChange:g,required:!0})),r.a.createElement("label",{htmlFor:"password",className:"block"},r.a.createElement("span",{className:"text-gray-700"},"Contrase\xf1a"),r.a.createElement("input",{className:"form-input mt-1 block w-full",type:"password",name:"password",value:p,onChange:g,required:!0,minLength:"6"})),r.a.createElement("label",{htmlFor:"password2",className:"block"},r.a.createElement("span",{className:"text-gray-700"}," Repetir Contrase\xf1a"),r.a.createElement("input",{className:"form-input mt-1 block w-full",type:"password",name:"password2",value:E,onChange:g,required:!0,minLength:"6"})),r.a.createElement("input",{className:"block bg-blue-500 text-white rounded focus:outline-none p-3 mt-2 active:bg-gray-500 focus:shadow-outline hover:bg-blue-300",type:"submit",value:"Enviar"})))},Z=function(){var e=Object(n.useContext)(G),t=Object(n.useContext)(b),a=e.setAlert,c=t.login,o=t.error,s=t.clearErrors;Object(n.useEffect)((function(){"Invalid Credentials"===o&&(a(o,"danger"),s())}),[o]);var l=Object(n.useState)({userName:"",password:""}),u=Object(i.a)(l,2),m=u[0],d=u[1],f=m.userName,p=m.password,E=function(e){return d(Object(I.a)(Object(I.a)({},m),{},Object(F.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""===f||""===p?a("Por favor complete todos los campos","danger"):c({userName:f,password:p})}},r.a.createElement("label",{htmlFor:"userName",className:"block"},r.a.createElement("span",{className:"text-gray-700"},"Usuario"),r.a.createElement("input",{className:"form-input mt-1 block w-full",type:"text",name:"userName",value:f,onChange:E,required:!0})),r.a.createElement("label",{htmlFor:"password",className:"block"},r.a.createElement("span",{className:"text-gray-700"},"Contrase\xf1a"),r.a.createElement("input",{className:"form-input mt-1 block w-full",type:"password",name:"password",value:p,onChange:E,required:!0})),r.a.createElement("input",{className:"block bg-blue-500 text-white rounded focus:outline-none p-3 mt-2 active:bg-gray-500 focus:shadow-outline hover:bg-blue-300",type:"submit",value:"Entrar",required:!0})))},z=function(e){var t=Object(n.useContext)(b).isAuthenticated;Object(n.useEffect)((function(){t&&e.history.push("/")}),[t,e.history]);var a=Object(n.useState)(!1),c=Object(i.a)(a,2),o=c[0],s=c[1];return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"flex flex-col md:flex-row w-full md:h-full md:justify-center md:items-stretch"},r.a.createElement("div",{className:"hidden md:flex flex-col w-1/2 h-screen p-3 text-center bg-gray-200  justify-between"},r.a.createElement(_,null)),r.a.createElement("div",{className:"md:w-1/2 h-screen md:h-full flex flex-col justify-center items-center"},r.a.createElement("div",{className:" p-2 md:mr-4 inline-flex items-center mb-10 md:mt-20"},r.a.createElement("i",{className:"fas fa-ghost fa-3x mx-2 "}),r.a.createElement("span",{className:"text-3xl text-gray font-bold uppercase tracking-wide"},"Ghost Climber")),r.a.createElement("div",{className:"w-11/12 p-5 bg-gray-200 border"},o?r.a.createElement(U,null):r.a.createElement(Z,null)),o?r.a.createElement("div",{className:"w-11/12 m-3 pt-3 px-3 bg-gray-200 border "},"Ya tienes cuenta,"," ",r.a.createElement("input",{className:"inline-block bg-transparent text-blue-500 focus:outline-none focus:font-bold mb-5",type:"submit",value:"Iniciar Sesi\xf3n",onClick:function(){return s(!1)}})):r.a.createElement("div",{className:" w-11/12 m-3 pt-3 px-3 bg-gray-200 border"},"\xbfNo tienes cuenta?,"," ",r.a.createElement("input",{className:"inline-block bg-transparent text-blue-500 focus:outline-none focus:font-bold mb-5",type:"submit",value:"Reg\xedstrate",onClick:function(){return s(!0)}})),r.a.createElement("a",{href:"#bienvenidos",className:"md:hidden flex flex-col justify-center items-center  text-gray-500 mt-10"},r.a.createElement("p",null,"M\xe1s Info ")," ",r.a.createElement("i",{className:"block fas fa-2x fa-arrow-alt-circle-down"}))),r.a.createElement("div",{id:"bienvenidos",className:"md:hidden h-screen p-3 text-center bg-gray-200  justify-around"},r.a.createElement(_,null))))},q=function(){var e=Object(n.useContext)(G);return e.alerts.length>0&&e.alerts.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.type)},r.a.createElement("i",{className:"fas fa-info-circle"})," ",e.msg)}))},M=a(123),P=function(e){var t=e.component,a=Object(M.a)(e,["component"]),c=Object(n.useContext)(b),o=c.isAuthenticated,s=c.loading;return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return o||s?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/landing"})}}))},B=a(9),H=a.n(B),V=a(24),J=a(11),Y=a.n(J),W=a(59),K=function(e,t){switch(t.type){case"GET_ZONAS":return Object(I.a)(Object(I.a)({},e),{},{loadingZonas:!1,zonas:t.payload});case"LOADING_CONTADORES":return Object(I.a)(Object(I.a)({},e),{},{loading:!0});case"LOADING_ZONAS":return Object(I.a)(Object(I.a)({},e),{},{loadingZonas:!0});case"SET_FECHA":return Object(I.a)(Object(I.a)({},e),{},{thisFecha:t.payload});case"GET_CONTADORES":return Object(I.a)(Object(I.a)({},e),{},{contadores:t.payload,loading:!1});case"GET_CONTADORES_SECTOR":return Object(I.a)(Object(I.a)({},e),{},{contadorSector:t.payload,loading:!1});case"UPDATE_CONTADORES":return Object(I.a)(Object(I.a)({},e),{},{contadores:e.contadores.map((function(e){return e._id===t.payload._id?t.payload:e})),loading:!1});case"ADD_CONTADORES":return Object(I.a)(Object(I.a)({},e),{},{contadores:[].concat(Object(W.a)(e.contadores),[t.payload])});case"FILTRAR_CONTADORES":return Object(I.a)(Object(I.a)({},e),{},{contadoresDay:e.contadores.filter((function(e){return x()(e.fecha).isSame(t.payload,"day")})),contadorSectorDay:e.contadorSector.filter((function(e){return x()(e.fecha).isSame(t.payload,"day")})),loading:!1});case"CLEAR_FILTER":return Object(I.a)(Object(I.a)({},e),{},{contadoresDay:null,contadorSectorDay:null});case"ERROR_CONTADORES":return Object(I.a)(Object(I.a)({},e),{},{loading:!1,error:t.payload});default:return e}},Q=a(121),X=a.n(Q),$=function(e,t){return Object.keys(t).reduce((function(a,n){return Object(I.a)(Object(I.a)({},a),Object(F.a)({},e[n]||n,t[n]))}),{})},ee=function(e){var t={zonas:null,contadores:null,contadoresDay:null,contadorSector:null,contadorSectorDay:null,thisFecha:new Date,loading:!1,loadingZonas:!1,error:null},a=Object(n.useReducer)(K,t),c=Object(i.a)(a,2),o=c[0],s=c[1],l=function(){s({type:"LOADING_CONTADORES"})},u=function(){s({type:"LOADING_ZONAS"})},m=function(){var e=Object(V.a)(H.a.mark((function e(){var t,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.prev=1,e.next=4,Y.a.get("/api/v1/sectores");case 4:t=e.sent,a=t.data.data,a=Object.entries(X()(a,"comuna")).map((function(e){return $({0:"comuna",1:"sector"},e)})),s({type:"GET_ZONAS",payload:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),s({type:"ERROR_CONTADORES",payload:e.t0.response});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(V.a)(H.a.mark((function e(){var t,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.prev=1,e.next=4,Y.a.get("/api/v1/contadores");case 4:t=e.sent,a=t.data.data,s({type:"GET_CONTADORES",payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:"ERROR_CONTADORES",payload:e.t0.response});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(V.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.prev=1,e.delegateYield(H.a.mark((function e(){var a,n,r,c,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.map((function(e){return e.sector})),n=[],r=0;r<a.length;r++)a[r].map((function(e){return n.push(e._id)}));return e.next=5,Promise.all(n.map((function(e){return Y.a.get("/api/v1/sectores/".concat(e,"/contadores"))})));case 5:c=e.sent,o=c.map((function(e){return e.data.data})).flat(2),s({type:"GET_CONTADORES_SECTOR",payload:o});case 8:case"end":return e.stop()}}),e)}))(),"t0",3);case 3:e.next=8;break;case 5:e.prev=5,e.t1=e.catch(1),s({type:"ERROR_CONTADORES",payload:e.t1.response});case 8:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(V.a)(H.a.mark((function e(t,a,n){var r,c,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={headers:{"Content-Type":"application/json"}},a){e.next=16;break}return e.prev=2,e.next=5,Y.a.post("/api/v1/subsectores/".concat(t.subsector._id,"/contadores/"),t,r);case 5:(c=e.sent).data.data.sectorId=n,c.data.data.deltaContador=t.contador,s({type:"ADD_CONTADORES",payload:c.data.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),s({type:"ERROR_CONTADORES",payload:e.t0.response.msg});case 14:e.next=28;break;case 16:return e.prev=16,e.next=19,Y.a.put("/api/v1/contadores/".concat(a),t,r);case 19:(o=e.sent).data.data.sectorId=n,o.data.data.deltaContador=t.contador,s({type:"UPDATE_CONTADORES",payload:o.data.data}),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(16),s({type:"ERROR_CONTADORES",payload:e.t1.response.msg});case 28:case"end":return e.stop()}}),e,null,[[2,11],[16,25]])})));return function(t,a,n){return e.apply(this,arguments)}}();return r.a.createElement(f.Provider,{value:{zonas:o.zonas,contadores:o.contadores,contadoresDay:o.contadoresDay,contadorSector:o.contadorSector,contadorSectorDay:o.contadorSectorDay,thisFecha:o.thisFecha,loading:o.loading,loadingZonas:o.loadingZonas,error:o.error,getZonas:m,getContadores:d,loadingContadores:l,getContadorSector:p,addContador:b,setThisContador:function(e){if(o.contadores){var t=o.contadores.filter((function(t){return(t.subsector._id===e||t.subsector===e)&&x()(t.fecha).isSame(o.thisFecha,"day")}));return 0===t.length&&(t=[{subsector:{_id:e},fecha:o.thisFecha,contador:0,dbStatus:401}]),t[0]}},setThisContadorSector:function(e){if(o.contadorSector){var t=o.contadorSector.filter((function(t){return t._id.sector===e&&x()(t.fecha).isSame(o.thisFecha,"day")}));return t.length>0?t[0].contador:0}},filtrarContadores:function(e){l(),s({type:"FILTRAR_CONTADORES",payload:e})},setFecha:function(e){s({type:"SET_FECHA",payload:e})},clearFilter:function(){s({type:"CLEAR_FILTER"})},setLoadingZonas:u}},e.children)},te=function(e,t){switch(t.type){case"LOADING":return Object(I.a)(Object(I.a)({},e),{},{loading:!0});case"USER_LOADED":return Object(I.a)(Object(I.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(I.a)(Object(I.a)(Object(I.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),Object(I.a)(Object(I.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case"CLEAR_ERRORS":return Object(I.a)(Object(I.a)({},e),{},{error:null});default:return e}},ae=function(e){e?Y.a.defaults.headers.common={Authorization:"Bearer ".concat(e)}:delete Y.a.defaults.headers.common.Authorization},ne=function(e){var t={token:localStorage.getItem("token"),user:null,isAuthenticated:null,loading:!0,error:null},a=Object(n.useReducer)(te,t),c=Object(i.a)(a,2),o=c[0],s=c[1],l=function(){s({type:"LOADING"})},u=function(){var e=Object(V.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),localStorage.token&&ae(localStorage.token),e.prev=2,e.next=5,Y.a.get("/api/v1/auth/me");case 5:t=e.sent,s({type:"USER_LOADED",payload:t.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s({type:"AUTH_ERROR"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(V.a)(H.a.mark((function e(t){var a,n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),a={headers:{"Content-Type":"application/json"}},e.prev=2,e.next=5,Y.a.post("api/v1/auth/register",t,a);case 5:n=e.sent,s({type:"REGISTER_SUCCESS",payload:n.data}),u(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),s({type:"REGISTER_FAIL",payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(V.a)(H.a.mark((function e(t){var a,n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),a={headers:{"Content-Type":"application/json"}},e.prev=2,e.next=5,Y.a.post("api/v1/auth/login",t,a);case 5:n=e.sent,s({type:"LOGIN_SUCCESS",payload:n.data}),u(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),s({type:"LOGIN_FAIL",payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(V.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.prev=1,e.next=4,Y.a.get("api/v1/auth/logout");case 4:s({type:"LOGOUT"}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(b.Provider,{value:{token:o.token,user:o.user,isAuthenticated:o.isAuthenticated,loading:o.loading,error:o.error,register:m,login:d,logout:f,clearErrors:function(){return s({type:"CLEAR_ERRORS"})},loadUser:u,loadingAuth:l}},e.children)},re=a(306),ce=function(e,t){switch(t.type){case"SET_ALERT":return[].concat(Object(W.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==t.payload}));default:return e}},oe=function(e){var t=Object(n.useReducer)(ce,[]),a=Object(i.a)(t,2),c=a[0],o=a[1];return r.a.createElement(G.Provider,{value:{alerts:c,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=Object(re.a)();o({type:"SET_ALERT",payload:{msg:e,type:t,id:n}}),setTimeout((function(){o({type:"REMOVE_ALERT",payload:n})}),a)}}},e.children)};localStorage.token&&ae(localStorage.token);var se=function(){return r.a.createElement(ne,null,r.a.createElement(ee,null,r.a.createElement(oe,null,r.a.createElement(s.a,null,r.a.createElement(q,null),r.a.createElement(l.d,null,r.a.createElement(P,{exact:!0,path:"/",component:L}),r.a.createElement(l.b,{exact:!0,path:"/landing",component:z}))))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.e3045988.chunk.js.map