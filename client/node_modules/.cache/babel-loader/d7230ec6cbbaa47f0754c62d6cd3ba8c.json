{"ast":null,"code":"import _slicedToArray from\"/Users/eyallevyg/developer/ghost_climber/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import ContadoresContext from'../../context/contadores/contadoresContext';import isPast from'../../utils/isPast';import Spinner from'../layout/Spinner';import moment from'moment';var GhostCounter=function GhostCounter(_ref){var sb=_ref.sb;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),counter=_useState2[0],setCounter=_useState2[1];// Contador Global\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),contador=_useState4[0],setContador=_useState4[1];// Contadores states\nvar contadoresContext=useContext(ContadoresContext);var addContador=contadoresContext.addContador,setThisContador=contadoresContext.setThisContador,thisFecha=contadoresContext.thisFecha;useEffect(function(){if(sb){setContador(setThisContador(sb._id));// eslint-disable-next-line\n}},[sb,setThisContador]);// add 1 to the couter\nvar countOne=function countOne(){if(counter<=2){setCounter(counter+1);var contadorActualizado={subsector:{_id:sb._id},contador:1,fecha:thisFecha};addContador(contadorActualizado,contador._id,sb.sector);}};var resetCount=function resetCount(){setCounter(0);var contadorActualizado={subsector:{_id:sb._id},contador:-counter,fecha:thisFecha};addContador(contadorActualizado,contador._id,sb.sector);};return/*#__PURE__*/React.createElement(\"div\",{id:\"\",className:\"relative flex pr-3 items-center justify-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\" inline-block flex justify-center items-center rounded w-12 px-3 focus:outline-none ' \\n          \".concat(contador&&(moment(thisFecha).isBefore(moment(),'day')?'bg-gray-800 text-white':contador.contador===0&&counter===0?'bg-blue-200 text-gray-500':'bg-blue-500 text-white'),\" \\n            \"),onClick:countOne,disabled:isPast(thisFecha)},contador?/*#__PURE__*/React.createElement(\"h5\",{className:\"\"},contador.contador):/*#__PURE__*/React.createElement(Spinner,null),/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-ghost ml-1\"})),counter>0?/*#__PURE__*/React.createElement(\"button\",{className:\"relative inset-y-0 inline-block bg-transparent focus:outline-none flex justify-center items-center text-sm  text-gray-500\",onClick:resetCount},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-undo ml-3 \"})):'');};//\nexport default React.memo(GhostCounter);","map":{"version":3,"sources":["/Users/eyallevyg/developer/ghost_climber/client/src/components/batches/GhostCounter.js"],"names":["React","useState","useEffect","useContext","ContadoresContext","isPast","Spinner","moment","GhostCounter","sb","counter","setCounter","contador","setContador","contadoresContext","addContador","setThisContador","thisFecha","_id","countOne","contadorActualizado","subsector","fecha","sector","resetCount","isBefore","memo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport ContadoresContext from '../../context/contadores/contadoresContext';\nimport isPast from '../../utils/isPast';\nimport Spinner from '../layout/Spinner';\nimport moment from 'moment';\n\nconst GhostCounter = ({ sb }) => {\n  const [counter, setCounter] = useState(0);\n  // Contador Global\n  const [contador, setContador] = useState(null);\n  // Contadores states\n  const contadoresContext = useContext(ContadoresContext);\n  const { addContador, setThisContador, thisFecha } = contadoresContext;\n\n  useEffect(() => {\n    if (sb) {\n      setContador(setThisContador(sb._id));\n      // eslint-disable-next-line\n    }\n  }, [sb, setThisContador]);\n\n  // add 1 to the couter\n  const countOne = () => {\n    if (counter <= 2) {\n      setCounter(counter + 1);\n      const contadorActualizado = {\n        subsector: {\n          _id: sb._id,\n        },\n        contador: 1,\n        fecha: thisFecha,\n      };\n\n      addContador(contadorActualizado, contador._id, sb.sector);\n    }\n  };\n\n  const resetCount = () => {\n    setCounter(0);\n    const contadorActualizado = {\n      subsector: {\n        _id: sb._id,\n      },\n      contador: -counter,\n      fecha: thisFecha,\n    };\n\n    addContador(contadorActualizado, contador._id, sb.sector);\n  };\n\n  return (\n    <div id='' className='relative flex pr-3 items-center justify-center'>\n      <button\n        className={` inline-block flex justify-center items-center rounded w-12 px-3 focus:outline-none ' \n          ${\n            contador &&\n            (moment(thisFecha).isBefore(moment(), 'day')\n              ? 'bg-gray-800 text-white'\n              : contador.contador === 0 && counter === 0\n              ? 'bg-blue-200 text-gray-500'\n              : 'bg-blue-500 text-white')\n          } \n            `}\n        onClick={countOne}\n        disabled={isPast(thisFecha)}\n      >\n        {contador ? <h5 className=''>{contador.contador}</h5> : <Spinner />}\n        <i className='fas fa-ghost ml-1'></i>\n      </button>\n      {counter > 0 ? (\n        <button\n          className='relative inset-y-0 inline-block bg-transparent focus:outline-none flex justify-center items-center text-sm  text-gray-500'\n          onClick={resetCount}\n        >\n          <i className='fas fa-undo ml-3 '></i>\n        </button>\n      ) : (\n        ''\n      )}\n    </div>\n  );\n};\n\n//\n\nexport default React.memo(GhostCounter);\n"]},"metadata":{},"sourceType":"module"}